import{u as I}from"./UserSearch-27d7ffe7.js";import{_ as C,m as b,g as f,r as p,o as n,c as o,a as t,b as g,e as _,t as d,F as y,l as m,w as V,k as w,q as T,d as N,p as G,f as q}from"./index-eee19d7a.js";import{u as P}from"./orders-d97efc3d.js";const z={data(){return{show:!1,useOrderStore:"",useProductsStore:"",valCategory:[],page:1,size:10,allTotal:0,totalOrder:[],ship:0,wait:0,newOrder:{product_id:"",qty:"",price:""},status:0,animals:[["Tên sản phẩm","Số lượng","Đơn giá","Thành tiền"]]}},async created(){var l;try{this.params.page=1,this.params.size=10,await this.getAllOrders(this.page,this.size),console.log("admGetAllOrders",this.admGetAllOrders),console.log(this.admGetAllOrders.results,"allOrder");for(let s=0;s<this.admGetAllOrders.results.length;s++){const i=(l=this.admGetAllOrders.results[s])==null?void 0:l.total;this.allTotal+=i,this.admGetAllOrders.results[s].status==1?this.ship+=1:this.wait+=1}await this.getCategories(this.params)}catch(s){console.log(s)}},methods:{...b(P,["getAllOrders","getOder","addOrder","putOder"]),...b(T,["getCategories","getProduct"]),exportPdf(){var s,i,u,a,r;let l={content:[{text:"HÓA ĐƠN MUA HÀNG",style:"header"},{text:"Hà nội, ngày   tháng   năm 20  ",style:"time"},{style:"table",table:{body:[["STT","Tên sản phẩm","Số lượng","Đơn giá","Thành tiền"],["1",(s=this.getOderId.order_products[0].product)==null?void 0:s.name,(i=this.getOderId.order_products[0])==null?void 0:i.qty,(u=this.getOderId.order_products[0].product)==null?void 0:u.price,((a=this.getOderId.order_products[0].product)==null?void 0:a.price)*((r=this.getOderId.order_products[0])==null?void 0:r.qty)]]}}],styles:{header:{fontSize:18,bold:!0,margin:[145,40]},time:{margin:[230,0,0,10]},table:{margin:[60,10,10,10]}}};pdfMake.createPdf(l).open()},async onAction(l){try{console.log(l,"240"),l.status==1?(this.status=0,await this.putOder(l.id,this.status),await this.getAllOrders(this.page,this.size)):(this.status=1,await this.putOder(l.id,this.status),await this.getAllOrders(this.page,this.size))}catch(s){console.log(s)}},async updatePage(l,s){try{this.page=l,this.size=s,await this.getAllOrders(this.page,this.size)}catch(i){console.log(i)}},totalPrice(l){return new Intl.NumberFormat("de-DE",{style:"currency",currency:"VND"}).format(l)},async addProducts(l){try{this.show=!this.show,await this.getOder(l),console.log(this.getOderId,"detail")}catch(s){console.log(s)}}},components:{userSearch:I},computed:{...f(P,["admGetAllOrders","getOderId"]),...f(T,["allCategory","allProducts","params"])}},c=l=>(G("data-v-20d1bce8"),l=l(),q(),l),M={class:"content"},D={key:0,class:"show-products"},H={class:"head"},B=c(()=>t("div",{class:"title1"},"Quản lý đơn hàng",-1)),F={class:"statistical"},U={class:"container"},E=c(()=>t("thead",null,[t("th",null,"STT"),t("th",null,"Mã đơn hàng"),t("th",null,"Người mua"),t("th",null,"Tổng tiền"),t("th",null,"Trạng thái"),t("th",null,"Vận chuyển")],-1)),Q=["onClick"],K=["onClick"],L={key:0},X={key:1},j={class:"text-center"},J={key:1,class:"show-addProducts"},R={class:"dialog"},W=c(()=>t("h2",{class:"title1"},"Thông tin đơn hàng",-1)),Y={class:"form-input",style:{display:"flex",width:"30rem"}},Z=c(()=>t("label",null,"Mã đơn hàng :    ",-1)),$={style:{color:"#796bc6"}},tt={class:"form-input",style:{display:"flex",width:"30rem"}},et=c(()=>t("label",null,"Tổng thu :     ",-1)),st={style:{color:"#796bc6"}},lt={class:"form-input"},dt=c(()=>t("label",null,"Danh sách sản phẩm",-1)),rt={style:{width:"35rem","text-align":"center",border:"1px #ccc solid"}},nt=c(()=>t("thead",null,[t("th",null,"Tên sản phẩm"),t("th",null,"Hình ảnh"),t("th",null,"Đơn giá"),t("th",null,"Số lượng"),t("th",null,"Thành tiền")],-1)),ot=["src"],at={class:"footer"},ct={class:"bill-pay"},it=N('<div style="display:flex;" data-v-20d1bce8><div style="padding-top:20px;" class="logo" data-v-20d1bce8><img style="width:30%;" src="https://vuoncayviet.com/img/logo.png" data-v-20d1bce8></div><div style="left:-11%;" class="content" data-v-20d1bce8><h2 data-v-20d1bce8>  Vườn Cây Việt</h2><h3 data-v-20d1bce8>Không chỉ là cây cảnh</h3></div></div><h3 style="left:17%;" data-v-20d1bce8>HÓA ĐƠN MUA BÁN</h3>',2),ht={style:{width:"35rem","text-align":"center",border:"1px #ccc solid"}},ut=c(()=>t("thead",null,[t("tr",null,[t("th",null,"STT"),t("th",null,"Tên hàng"),t("th",null,"Số lượng"),t("th",null,"Đơn giá"),t("th",null,"Thành tiền")])],-1));function pt(l,s,i,u,a,r){const A=p("userSearch"),S=p("v-pagination"),x=p("v-col");return n(),o("div",M,[a.show==!1?(n(),o("div",D,[t("div",H,[B,g(A)]),t("div",F,[t("span",null,[_("Tổng tiền hàng : "),t("p",null,d(r.totalPrice(this.allTotal)),1)]),t("span",null,[_("Đơn đang giao : "),t("p",null,d(this.ship),1)]),t("span",null,[_("Đơn chờ xử lý : "),t("p",null,d(this.wait),1)])]),t("table",U,[E,t("tbody",null,[(n(!0),o(y,null,m(l.admGetAllOrders.results,(e,h)=>{var v,O;return n(),o("tr",{key:h},[t("td",null,d(h+1),1),t("td",{class:"order-code",onClick:k=>r.addProducts(e.id)},d(e.code),9,Q),t("td",null,d(e.user.fullname),1),t("td",null,d(r.totalPrice(((v=e.order_products[0])==null?void 0:v.qty)*((O=e.order_products[0])==null?void 0:O.product.price))),1),t("td",{class:"btn-status",onClick:k=>r.onAction(e)},[t("p",null,d(e.status==0?"Chờ xử lý":"Đang giao hàng"),1)],8,K),t("td",null,[e.status==3?(n(),o("p",L,"Đã nhận hàng")):(n(),o("p",X,"Chưa nhận hàng"))])])}),128))])]),t("div",j,[g(x,{cols:"5",style:{"margin-left":"21.5rem"}},{default:V(()=>[g(S,{modelValue:a.page,"onUpdate:modelValue":[s[0]||(s[0]=e=>a.page=e),s[1]||(s[1]=e=>r.updatePage(a.page,a.size))],length:this.admGetAllOrders.total/10,rounded:"circle"},null,8,["modelValue","length"])]),_:1})])])):w("",!0),a.show==!0?(n(),o("div",J,[t("div",R,[W,t("div",Y,[Z,t("p",$,d(this.getOderId.code),1)]),t("div",tt,[et,t("p",st,d(r.totalPrice(this.getOderId.total)),1)]),t("div",lt,[dt,t("table",rt,[nt,(n(!0),o(y,null,m(l.getOderId.order_products,(e,h)=>(n(),o("tr",{key:h},[t("td",null,d(e.product.name),1),t("img",{style:{width:"100px"},src:e.product.product_images[0].image_path},null,8,ot),t("td",null,d(r.totalPrice(e.product.price)),1),t("td",null,d(e.qty),1),t("td",null,d(r.totalPrice(e.product.price*e.qty)),1)]))),128))])]),t("div",at,[t("button",{class:"btn-adduser",onClick:s[2]||(s[2]=(...e)=>r.exportPdf&&r.exportPdf(...e))},"Xuất hóa đơn"),t("button",{class:"btn-adduser",type:"reset",onClick:s[3]||(s[3]=(...e)=>r.addProducts&&r.addProducts(...e))}," Quay lại ")])])])):w("",!0),t("div",ct,[it,t("div",null,"Mã hóa đơn : #"+d(this.getOderId.code),1),t("table",ht,[ut,(n(!0),o(y,null,m(l.getOderId.order_products,(e,h)=>(n(),o("tr",{key:h},[t("td",null,d(h+1),1),t("td",null,d(e.product.name),1),t("td",null,d(e.qty),1),t("td",null,d(e.product.price),1),t("td",null,d(r.totalPrice(e.product.price*e.qty)),1)]))),128))])])])}const mt=C(z,[["render",pt],["__scopeId","data-v-20d1bce8"]]);export{mt as default};
