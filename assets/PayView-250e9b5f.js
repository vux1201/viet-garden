import{_ as V,m as c,S as y,g as h,o as v,c as p,a,t as s,e as u,F as O,l as S,u as C,n as T,d as r,p as x,f as B}from"./index-eee19d7a.js";import{u as b}from"./orders-d97efc3d.js";const k={data(){return{sumTotal:0,valOrder:[],idCart:[]}},async created(){try{await this.getProfile(),await this.getCarts();for(let t=0;t<this.allCart.length;t++)this.sumTotal+=this.allCart[t].product.price*this.allCart[t].qty;console.log(this.allCart,"allc"),console.log(this.allOrders,"allO1")}catch(t){console.log(t)}},methods:{...c(C,["getProfile"]),...c(T,["getCarts","deleteCart"]),...c(b,["getOrders","addOrder"]),async postOrder(){try{if(this.allCart.length<1)y.fire("Không có sản phẩm được chọn");else{for(let d=0;d<this.allCart.length;d++){const o=this.allCart[d],_=o.id,i={qty:o.qty,product_id:o.product.id,price:o.product.price};this.valOrder.push(i),this.idCart.push(_)}let t=this.valOrder,l=this.idCart;await this.addOrder(t);for(let d=0;d<this.idCart.length;d++)await this.deleteCart(l[d]),console.log(l,"12o");await this.getCarts(),y.fire({position:"top-center",icon:"success",title:"Đặt hàng thành công",showConfirmButton:!1,timer:2e3}),setTimeout(()=>{this.$router.push({path:"/home"})},"2000")}}catch(t){console.log(t)}},priceTotals(t){return new Intl.NumberFormat("de-DE",{style:"currency",currency:"VND"}).format(t)}},computed:{...h(C,["auth"]),...h(T,["allCart"]),...h(b,["allOrders"])}},n=t=>(x("data-v-718d9068"),t=t(),B(),t),N={class:"pay-view"},q=r('<section class="sub-bg" data-v-718d9068><div class="container" data-v-718d9068><div class="sub-head" data-v-718d9068><a href="https://vuoncayviet.com" data-v-718d9068><i class="fa fa-home" data-v-718d9068></i>Trang chủ </a><span data-v-718d9068> Đặt hàng &amp; thanh toán</span></div></div></section>',1),I={class:"bg-dark",style:{"padding-top":"20px"}},P={class:"container"},M={class:"content-page"},D=r('<div class="title-signin" data-v-718d9068><h2 data-v-718d9068>Đặt hàng &amp; thanh toán</h2></div><div class="part-buy" data-v-718d9068><ul data-v-718d9068><li class="left active" data-v-718d9068><h4 data-v-718d9068>Đăng nhập</h4><span data-v-718d9068>1</span><div class="part-line" data-v-718d9068></div></li><li class="mid active" data-v-718d9068><h4 data-v-718d9068>Địa chỉ giao hàng</h4><span data-v-718d9068>2</span><div class="part-line" data-v-718d9068></div></li><li class="right active" data-v-718d9068><h4 data-v-718d9068>Thanh Toán</h4><span data-v-718d9068>3</span><div class="part-line" data-v-718d9068></div></li></ul></div>',2),F={class:"content-payment"},E={class:"infocust-product info-cus-delivery"},L=r('<h3 data-v-718d9068>Phương thức thanh toán</h3><ul data-v-718d9068><li data-v-718d9068><label data-v-718d9068> Cách Thanh Toán <span data-v-718d9068>*</span></label><div class="form-delivery" data-v-718d9068><select data-v-718d9068><option selected value="0" data-v-718d9068> Vui lòng chọn cách thanh toán </option><option value="1" data-v-718d9068> Thanh toán chuyển khoản qua ngân hàng </option><option value="2" data-v-718d9068>Trả tiền mặt khi nhận hàng</option></select><i class="fa-light fa-angle-down" data-v-718d9068></i></div></li><li data-v-718d9068><label data-v-718d9068> Cách Vân Chuyển <span data-v-718d9068>*</span></label><div class="form-delivery" data-v-718d9068><select name="vnOrderCheckB31:ddlHTVC" data-v-718d9068><option selected value="0" data-v-718d9068> Vui lòng chọn cách vận chuyển </option><option value="1" data-v-718d9068>Giao hàng tận nơi</option><option value="2" data-v-718d9068>Nhận hàng tại cửa hàng</option><option value="3" data-v-718d9068>Nhận hàng qua bưu điện</option></select><i class="fa-light fa-angle-down" data-v-718d9068></i></div></li><li data-v-718d9068><label data-v-718d9068> Mã Bảo Vệ</label><div class="form-delivery" data-v-718d9068><span class="MaBaoVe" data-v-718d9068>562c</span></div></li><li data-v-718d9068><label data-v-718d9068> Nhập Mã Bảo Vệ <span data-v-718d9068>*</span></label><div class="form-delivery" data-v-718d9068><input type="text" placeholder="Mã Bảo Vệ" data-v-718d9068></div></li><li data-v-718d9068><label data-v-718d9068> Thông Tin Thêm</label><div class="form-delivery" data-v-718d9068><textarea data-v-718d9068></textarea></div></li></ul>',2),A={class:"button-signin"},G={class:"content-right"},H={class:"order-product",style:{"margin-bottom":"20px"}},K=n(()=>a("h2",null,[a("strong",null,"Địa chỉ giao hàng "),a("a",{href:"/shipment-details"},[a("input",{type:"button",value:"Chỉnh sửa"})])],-1)),U=n(()=>a("a",{href:"/thanh-toan-dia-chi.html"},null,-1)),j={class:"info-deivery"},z=n(()=>a("i",{class:"fa fa-user"},null,-1)),J=n(()=>a("i",{class:"fa fa-phone"},null,-1)),Q=n(()=>a("i",{class:"fa fa-home"},null,-1)),R={class:"order-product"},W=n(()=>a("strong",null,"Số sản phẩm ",-1)),X=n(()=>a("a",{href:"/cartView"},[a("input",{type:"button",value:"Chỉnh sửa"})],-1)),Y=r('<li data-v-718d9068><div class="no-cart" data-v-718d9068><strong data-v-718d9068>Ảnh</strong></div><div class="name-cart" data-v-718d9068><strong data-v-718d9068>Tên sản phẩm</strong></div><div class="pricepay-cart" data-v-718d9068><strong data-v-718d9068>Đơn giá</strong></div><div class="num-cart" data-v-718d9068><strong data-v-718d9068>SL</strong></div><div class="pricepay-cart" data-v-718d9068><strong data-v-718d9068>Thành Tiền</strong></div></li>',1),Z=["src"],$={class:"name-cart"},aa={href:"#","san-pham":""},ta={class:"pricepay-cart"},sa={class:"num-cart"},da={class:"pricepay-cart"},ea={class:"total-finish"},na=n(()=>a("h6",null,"Tổng Tiền",-1));function ia(t,l,d,o,_,i){var g,m,f;return v(),p("div",N,[q,a("section",I,[a("div",P,[a("div",M,[D,a("div",F,[a("div",E,[L,a("div",A,[a("button",{onClick:l[0]||(l[0]=(...e)=>i.postOrder&&i.postOrder(...e))},"Đặt hàng")])]),a("div",G,[a("div",H,[K,U,a("div",j,[a("p",null,[z,a("strong",null,"   "+s((g=this.auth.user)==null?void 0:g.fullname),1)]),a("p",null,[J,u("   "+s((m=this.auth.user)==null?void 0:m.phone_number),1)]),a("p",null,[Q,u("   "+s((f=this.auth.user)==null?void 0:f.address),1)])])]),a("div",R,[a("h2",null,[W,u("("+s(this.allCart.length)+") ",1),X]),a("ul",null,[Y,(v(!0),p(O,null,S(t.allCart,(e,w)=>(v(),p("li",{key:w},[a("img",{class:"no-cart",src:e.product.product_images[0].image_path},null,8,Z),a("div",$,[a("a",aa,s(e.product.name),1)]),a("div",ta,s(i.priceTotals(e.product.price)),1),a("div",sa,s(e.qty),1),a("div",da,[a("strong",null,s(i.priceTotals(e.product.price*e.qty)),1)])]))),128))]),a("div",ea,[na,a("span",null,s(i.priceTotals(this.sumTotal)),1)])])])])])])])])}const ra=V(k,[["render",ia],["__scopeId","data-v-718d9068"]]);export{ra as default};
